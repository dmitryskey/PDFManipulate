<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="robots" content="noindex, nofollow">
  <title>DEoD Editor</title>
  <script src="ckeditor/ckeditor.js"></script>
  <script src="jquery/jquery-3.2.1.min.js"></script>
  <script src="jquery/url.min.js"></script>
  <script src="jquery/jquery.base64.js"></script>
</head>

<body>
  <textarea cols="80" id="txtEditor" name="txtEditor" rows="10" style="display:none">
  </textarea>
  <div id="divLoading" style="text-align:center;vertical-align:middle">Loading...</div>

  <script type="text/javascript">
    $(document).ready(function () {                
      // We need to turn off the automatic editor creation first.
      CKEDITOR.disableAutoInline = true;
      CKEDITOR.replace('txtEditor');

      if ($.url('?locale')) {
        CKEDITOR.config.language = $.url('?locale');
      }

      $.ajax({
        url: '/GetFileContent?fileid=' + $.url('?fileid'),
        async: true,
        cache: false,
        timeout: 300000,
        success: function (data) { CKEDITOR.instances.txtEditor.setData($.base64.decode(JSON.parse(data).content)); $('#divLoading').hide(); $('#txtEditor').show(); },
        error: function (xhr, ajaxOptions, thrownError) { alert(thrownError); $('#divLoading').hide(); $('#txtEditor').show(); }
      });
    });
  </script>
</body>

</html>